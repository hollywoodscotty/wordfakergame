<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Word Faker Game</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      background: #111;
      color: #eee;
      display: flex;
      align-items: center;
      justify-content: center;
      height: 100vh;
      margin: 0;
      text-align: center;
    }
    .card {
      background: #1e1e1e;
      padding: 6vh 6vw;
      border-radius: 24px;
      box-shadow: 0 20px 50px rgba(0,0,0,0.6);
      width: 90vw;
      height: 90vh;
      display: flex;
      flex-direction: column;
      justify-content: center;
    }
    h1 {
      font-size: clamp(3rem, 6vw, 6rem);
      margin: 0 0 3vh 0;
    }
    h2 {
      font-size: clamp(2.5rem, 5vw, 5rem);
      margin: 0 0 3vh 0;
    }
    p {
      font-size: clamp(2rem, 4vw, 4rem);
    }
    input {
      padding: 1vh 1vw;
      font-size: clamp(2rem, 4vw, 4rem);
      width: 30vw;
      max-width: 200px;
      text-align: center;
      border-radius: 12px;
      border: none;
      display: block;
      margin: 0 auto;
    }
    button {
      padding: 1.5vh 3vw;
      font-size: clamp(2rem, 4vw, 4rem);
      margin-top: 4vh;
      cursor: pointer;
      border: none;
      border-radius: 16px;
      background: #4caf50;
      color: #000;
      display: block;
      margin-left: auto;
      margin-right: auto;
    }
    .countdown {
      font-size: clamp(5rem, 10vw, 10rem);
      margin-top: 2vh;
    }
    .value {
      font-size: clamp(5rem, 10vw, 10rem);
      font-weight: bold;
      letter-spacing: 0.2em;
    }
  </style>
</head>
<body>
  <div class="card" id="app"></div>

  <script>
    const WORD_BANK = [
      "APPLE","BANANA","ORANGE","HOUSE","CAR","TRAIN","PLANE","BOAT","RIVER",
      "OCEAN","BEACH","MOUNTAIN","FOREST","DESERT","CLOUD","RAIN","SNOW",
      "THUNDER","LIGHTNING","FIRE","SMOKE","STONE","ROCK","SAND","CHAIR",
      "TABLE","COUCH","BED","PILLOW","BLANKET","CLOCK","WATCH","PHONE",
      "COMPUTER","SCREEN","KEYBOARD","MOUSE","CAMERA","LIGHT","LAMP","DOOR",
      "WINDOW","FLOOR","CEILING","WALL","STAIRS","BRIDGE","ROAD","STREET",
      "CITY","TOWN","VILLAGE","SCHOOL","CLASS","TEACHER","STUDENT","BOOK",
      "PAPER","PENCIL","PEN","ERASER","BAG","BACKPACK","SHOES","HAT","COAT",
      "SHIRT","PANTS","FOOD","BREAD","CHEESE","MILK","WATER","COFFEE","TEA",
      "SUGAR","SALT","PEPPER","CAKE","COOKIE","ICE","CANDLE","MIRROR",
      "MUSIC","SONG","MOVIE","GAME","BALL","TOY","GIFT"
    ];

    const EMOJI_BANK = [
      "üê∂","üê±","üê≠","üêπ","üê∞","ü¶ä","üêª","üêº","üê®","üêØ",
      "ü¶Å","üêÆ","üê∑","üê∏","üêµ","üêî","üêß","üê¶","üê§","ü¶Ü",
      "ü¶â","ü¶á","üê∫","üêó","üê¥","ü¶Ñ","üêù","ü¶ã","üêå","üê¢"
    ];

    const app = document.getElementById("app");

    let players = 4;
    let currentPlayer = 1;
    let secretWord = "";
    let oddPlayer = 1;
    let countdownInterval = null;
    let countdownCallback = null;
    let playerEmojis = [];

    // üîä Countdown blip
    const audioCtx = new (window.AudioContext || window.webkitAudioContext)();

    function playBlip() {
      const osc = audioCtx.createOscillator();
      const gain = audioCtx.createGain();

      osc.frequency.value = 880;
      gain.gain.setValueAtTime(0.1, audioCtx.currentTime);
      gain.gain.exponentialRampToValueAtTime(0.001, audioCtx.currentTime + 0.08);

      osc.connect(gain);
      gain.connect(audioCtx.destination);

      osc.start();
      osc.stop(audioCtx.currentTime + 0.08);
    }

    function getPlayerLabel(num) {
      return `${playerEmojis[num - 1]} Player ${num}`;
    }

    function showStartScreen() {
      clearInterval(countdownInterval);
      app.innerHTML = `
        <h1>Word Faker Game</h1>
        <p style="font-size: clamp(1.6rem, 2.5vw, 2.8rem); line-height: 1.4; max-width: 80%; margin: 0 auto 4vh auto;">
          Each player gets a turn to secretly view a word while the others look away.
          All players see the same word‚Ä¶ except one.
          That player sees only question marks and is known as <strong>The Faker</strong>.
          <br /><br />
          When it‚Äôs time to play, each player says a different word related to the secret word.
          The group must figure out who The Faker is.
        </p>
        <p>How many players?</p>
        <input id="playerInput" placeholder="4" />
        <button onclick="startGame()">Start</button>
      `;
    }

    function startGame() {
      audioCtx.resume();

      const input = document.getElementById("playerInput").value;
      const parsed = parseInt(input, 10);
      players = Number.isFinite(parsed) && parsed > 0 ? parsed : 4;

      currentPlayer = 1;
      secretWord = WORD_BANK[Math.floor(Math.random() * WORD_BANK.length)];
      oddPlayer = Math.floor(Math.random() * players) + 1;

      const shuffled = [...EMOJI_BANK].sort(() => Math.random() - 0.5);
      playerEmojis = shuffled.slice(0, players);

      showReadyScreen();
    }

    function showReadyScreen() {
      showCountdown(`${getPlayerLabel(currentPlayer)} ready?`, 5, showValueScreen);
    }

    function showValueScreen() {
      const value = currentPlayer === oddPlayer ? "???" : secretWord;
      showCountdown(`<span class="value">${value}</span>`, 5, nextPlayer);
    }

    function nextPlayer() {
      if (currentPlayer < players) {
        currentPlayer++;
        showCountdown(`Get ${getPlayerLabel(currentPlayer)}`, 5, showReadyScreen);
      } else {
        showEndScreen();
      }
    }

    function showEndScreen() {
      clearInterval(countdownInterval);
      app.innerHTML = `
        <h1>Now PLAY!</h1>
        <button onclick="showRevealScreen()">Reveal</button>
      `;
    }

    function showRevealScreen() {
      app.innerHTML = `
        <h1>Reveal</h1>
        <p>${getPlayerLabel(oddPlayer)} was The Faker</p>
        <button onclick="showStartScreen()">Reset</button>
      `;
    }

    function skipCountdown() {
      clearInterval(countdownInterval);
      if (countdownCallback) countdownCallback();
    }

    function showCountdown(message, seconds, callback) {
      clearInterval(countdownInterval);
      countdownCallback = callback;
      let remaining = seconds;

      app.innerHTML = `
        <h2>${message}</h2>
        <div class="countdown" id="count">${remaining}</div>
        <button onclick="skipCountdown()">Skip Countdown</button>
      `;

      countdownInterval = setInterval(() => {
        playBlip();
        remaining--;
        document.getElementById("count").textContent = remaining;

        if (remaining <= 0) {
          clearInterval(countdownInterval);
          setTimeout(callback, 300);
        }
      }, 1000);
    }

    showStartScreen();
  </script>
</body>
</html>

