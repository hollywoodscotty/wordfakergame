<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<title>Word Faker Game</title>

<style>
body {
  font-family: Arial, sans-serif;
  background: #111;
  color: #eee;
  display: flex;
  align-items: center;
  justify-content: center;
  height: 100vh;
  margin: 0;
  text-align: center;
}
.card {
  background: #1e1e1e;
  padding: 6vh 6vw;
  border-radius: 24px;
  box-shadow: 0 20px 50px rgba(0,0,0,0.6);
  width: 90vw;
  height: 90vh;
  overflow-y: auto;
}
h1 { font-size: clamp(3rem,6vw,6rem); }
h2 { font-size: clamp(2.5rem,5vw,5rem); }
p  { font-size: clamp(1.6rem,3vw,3rem); }

input {
  font-size: 2.5rem;
  padding: 1vh 1vw;
  border-radius: 12px;
  border: none;
  width: 50%;
  text-align: center;
}

button {
  font-size: 2.5rem;
  padding: 1vh 3vw;
  margin-top: 3vh;
  border-radius: 16px;
  border: none;
  background: #4caf50;
  cursor: pointer;
}

.countdown {
  font-size: clamp(5rem,10vw,10rem);
}

.value {
  font-size: clamp(5rem,10vw,10rem);
  letter-spacing: 0.2em;
}

.player-bar {
  display: flex;
  justify-content: center;
  gap: 2vw;
  margin-bottom: 3vh;
  flex-wrap: wrap;
}

.player {
  font-size: 2.5rem;
  opacity: 0.6;
}

.player.active {
  font-size: 4rem;
  opacity: 1;
}

.score-row {
  display: flex;
  justify-content: center;
  align-items: center;
  gap: 2vw;
  margin: 2vh 0;
  font-size: 2.5rem;
}
</style>
</head>

<body>
<div class="card" id="app"></div>

<script>
const WORD_BANK = ["APPLE","BANANA","ORANGE","HOUSE","CAR","TRAIN","PLANE","BOAT","RIVER","OCEAN","BEACH","MOUNTAIN","FOREST","DESERT","CLOUD","RAIN","SNOW","FIRE","STONE","CHAIR","TABLE","PHONE","SCREEN","LIGHT","DOOR","WINDOW","ROAD","CITY","BOOK","PENCIL","BREAD","WATER","COFFEE","MUSIC","MOVIE","GAME"];

const EMOJI_BANK = ["ğŸ¶","ğŸ±","ğŸ­","ğŸ¹","ğŸ°","ğŸ¦Š","ğŸ»","ğŸ¼","ğŸ¨","ğŸ¯","ğŸ¦","ğŸ®","ğŸ·","ğŸ¸","ğŸµ","ğŸ”","ğŸ§","ğŸ¦","ğŸ¦†","ğŸ¦‰","ğŸ¦‡","ğŸº","ğŸ´","ğŸ¦„"];

const app = document.getElementById("app");
const audioCtx = new (window.AudioContext||window.webkitAudioContext)();

let players = 4;
let currentPlayer = 1;
let oddPlayer = 1;
let secretWord = "";
let emojis = [];
let points = [];

let countdownInterval, countdownCallback;

function blip(freq){
  const o = audioCtx.createOscillator();
  const g = audioCtx.createGain();
  o.frequency.value = freq;
  g.gain.value = 0.08;
  o.connect(g);
  g.connect(audioCtx.destination);
  o.start();
  o.stop(audioCtx.currentTime+0.1);
}

function renderBar(active=true){
  return `
  <div class="player-bar">
    ${emojis.map((e,i)=>`
      <div class="player ${active && i+1===currentPlayer?"active":""}">
        ${e} (${points[i]})
      </div>`).join("")}
  </div>`;
}

function startScreen(){
  app.innerHTML = `
  <h1>Word Faker Game</h1>
  <p>
    Each player secretly views a word while others look away.<br><br>
    Everyone gets the SAME word â€” except one.<br>
    That player sees <strong>???</strong> and is the Faker.<br><br>
    Players say related words aloud.<br>
    Figure out who the Faker is!
  </p>
  <p>How many players?</p>
  <input id="pcount" placeholder="4">
  <button onclick="startGame()">Start</button>`;
}

function startGame(){
  audioCtx.resume();
  players = parseInt(document.getElementById("pcount").value)||4;
  if(points.length!==players) points = Array(players).fill(0);
  emojis = [...EMOJI_BANK].sort(()=>Math.random()-0.5).slice(0,players);
  secretWord = WORD_BANK[Math.floor(Math.random()*WORD_BANK.length)];
  oddPlayer = Math.floor(Math.random()*players)+1;
  currentPlayer = 1;
  readyScreen();
}

function readyScreen(){
  blip(600);
  countdown(`${renderBar()}<h2>Player ${currentPlayer}, ready?</h2>`,5,wordScreen);
}

function wordScreen(){
  blip(900);
  const v = currentPlayer===oddPlayer?"???":secretWord;
  countdown(`${renderBar()}<div class="value">${v}</div>`,5,nextPlayer);
}

function nextPlayer(){
  if(currentPlayer<players){
    currentPlayer++;
    readyScreen();
  } else {
    playScreen();
  }
}

function playScreen(){
  blip(750);
  app.innerHTML = `
    ${renderBar(false)}
    <h1>Now Play!</h1>
    <button onclick="reveal()">Reveal</button>`;
}

function reveal(){
  app.innerHTML = `
    ${renderBar(false)}
    <h1>Reveal</h1>
    <p>${emojis[oddPlayer-1]} was the Faker</p>
    <button onclick="fakerGuess()">Continue</button>`;
}

function fakerGuess(){
  app.innerHTML = `
    ${renderBar(false)}
    <h1>Faker</h1>
    <p>Guess the word out loud.</p>
    <button onclick="scoreScreen()">Continue</button>`;
}

function scoreScreen(){
  app.innerHTML = `
    <h1>Adjust Scores</h1>
    ${emojis.map((e,i)=>`
      <div class="score-row">
        ${e} (${points[i]})
        <button onclick="points[${i}]++;scoreScreen()">+</button>
        <button onclick="points[${i}]--;scoreScreen()">-</button>
      </div>`).join("")}
    <button onclick="startGame()">Next Round</button>`;
}

function countdown(content,secs,cb){
  clearInterval(countdownInterval);
  countdownCallback=cb;
  let r=secs;
  app.innerHTML = `${content}<div class="countdown">${r}</div><button onclick="skip()">Skip</button>`;
  countdownInterval=setInterval(()=>{
    blip(880);
    r--;
    document.querySelector(".countdown").textContent=r;
    if(r<=0){clearInterval(countdownInterval);cb();}
  },1000);
}

function skip(){
  clearInterval(countdownInterval);
  countdownCallback();
}

startScreen();
</script>
</body>
</html>

